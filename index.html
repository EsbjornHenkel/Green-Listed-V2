<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" media="all" href="index.css">
    <title>Green Listed</title>

    <!-- Google analytics tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JRW1JYVPWQ"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-JRW1JYVPWQ');
    </script>
</head>

<body onload="init()">
    <header>
        <span class="centerContent">
            <img src="headerEven.jpg" alt="Green Listed">
            <nav>
                <a href="" target="_blank">Demo</a>
                <a target="_blank"
                    href="https://www.youtube.com/watch?v=9A6WQAYCOvs&list=PLtETtjUFMYF1onsu-BpLIM6h34R6N5NP3">Videos</a>
                <a href="" target="_blank">How to use</a>
                <a href="" target="_blank">How to cite</a>
            </nav>
        </span>
    </header>
    <main>
        <div id="overlay" class="fazeOut">
            <div class="loading-box">
                Screening in progress...
            </div>
        </div>
        <div class="plate">
            <h2 class="plateTitle">1. Select library</h2>
            <div class="plateContent">

                <div class="smallPlate">
                    <h3 class="smallTitle">
                        <select id="libraries" onchange="selectNewLibrary()" required>

                            <option value="custom">User Upload</option>
                        </select>
                    </h3>
                    <div class="plateContent">
                        <form id="User Upload" class="inactive">
                            <p class="flexRow">
                                Select a .txt file to use as Library
                                <input type="file" accept=".txt" id="customFile" onchange="indexSymbolChanges()">
                            </p>

                            <table>
                                <tr id="GeneSymbolIndexRow">
                                    <td>Symbol Column</td>
                                    <td><input type="number" id="GeneSymbolIndex"
                                            onchange="indexLibraryColumnChanges()"></td>
                                    <td id="statusFileSymbolIndex"></td>
                                </tr>
                                <tr id="gRNAIndexRow">
                                    <td>gRNA Column</td>
                                    <td><input type="number" id="gRNAIndex" onchange="indexLibraryColumnChanges()"></td>
                                    <td id="statusFilegRNAIndex"></td>
                                </tr>
                                <tr id="rankingIndexRow">
                                    <td>Rank Column (optional)</td>
                                    <td><input type="number" id="rankingIndex" onchange="indexLibraryColumnChanges()">
                                    </td>
                                    <td id="statusRankingIndex"></td>
                                </tr>
                            </table>

                        </form>

                        <p id="libraryInfo"></p>
                        <div id="symbolsFound"></div>
                    </div>

                </div>
            </div>
        </div>

        <div class="plate">
            <h2 class="plateTitle">2. Input symbols</h2>
            <div class="plateContent">

                <div class="smallPlate">
                    <h3 class="smallTitle">Symbols</h3>
                    <div class="plateContent">
                        <form>
                            <label class="justifyCenter">
                                <input name="a" type="radio" id="enableDirectMatches" onchange="indexSymbolChanges()">
                                Only direct matches <span></span>
                            </label>
                            <label class="justifyCenter">
                                <input name="a" type="radio" id="enableSynonyms" onchange="indexSymbolChanges()">
                                Use synonyms <span id="statusNumSynonyms"></span>
                            </label>

                            <label class="justifyCenter">
                                <input name="a" type="radio" id="partialMatches" onchange="indexSymbolChanges()">
                                Allow for partial matches
                            </label>
                        </form>
                        <textarea id="searchSymbols" onchange="indexSymbolChanges()">

                    </textarea>
                        <p id="statusSearchSymbolsRows"></p>
                    </div>
                </div>

                <div class="smallPlate">
                    <h3 class="smallTitle">Symbols not found</h3>
                    <div class="plateContent">
                        <textarea readonly class="scrollablePlate" id="displaySynonyms"> </textarea>
                    </div>
                </div>
            </div>
        </div>
        <div class="plate">
            <h2 class="plateTitle">3. Set parameters & Run</h2>
            <div class="plateContent">

                <div class="smallPlate">
                    <h3 class="smallTitle">Ranking</h3>
                    <table class="plateContent">
                        <tr>
                            <td>Ranking order</td>
                            <td>
                                <select id="rankingOrder" onchange="indexSettingsChanges()">
                                    <option value="descending">Descending</option>
                                    <option value="ascending">Ascending</option>
                                </select>
                            </td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>Limit to top</td>
                            <td><input type="number" id="numberToRank" onchange="indexSettingsChanges()"></td>
                            <td></td>
                        </tr>
                    </table>
                </div>

                <div class="smallPlate">
                    <h3 class="smallTitle">Sequence modifications</h3>
                    <div class="plateContent">
                        <table>
                            <tr>
                                <td>Trim </td>
                                <td>5'<input type="number" id="trimBefore" min="0" value="0"
                                        onchange="indexSettingsChanges()"></td>
                                <td>3'<input type="number" id="trimAfter" min="0" value="0"
                                        onchange="indexSettingsChanges()"></td>

                            </tr>
                            <tr>
                                <td>Adapter sequences</td>
                                <td>5'<input type="text" id="adapterBefore" onchange="indexSettingsChanges()"></td>
                                <td>3'<input type="text" id="adapterAfter" onchange="indexSettingsChanges()"></td>
                            </tr>
                        </table>
                        <p id="ExampleSequance"></p>
                    </div>
                </div>


                <div class="smallPlate">
                    <h3 class="smallTitle">Run</h3>
                    <table class="plateContent">
                        <tr>
                            <td>Output file name</td>
                            <td>
                                <input type="text" id="outputFileName" placeholder="enter file name"
                                    onchange="indexSettingsChanges()">
                            </td>
                        </tr>
                        <tr>
                            <td> </td>
                        </tr>
                        <tr>
                            <td>
                                <button id="startButton" onclick="indexRunScreening()">&nbsp;Run <span
                                        id="startButtonText">â–¶</span></button>
                            </td>
                            <td></td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <div id="statusSearch"></div>
                            </td>
                        </tr>
                    </table>

                </div>

            </div>
        </div>


        <footer class="plate">
            <h2 class="plateTitle">4. Show output </h2>
            <div class="plateContent">
                <table id="outputTable">
                    <tr>
                        <td>Output</td>
                        <td><a href="" id="fullDownload">Download</a></td>
                        <td><button onclick="showFullOutput()">Show</button></td>
                    </tr>
                    <tr>
                        <td>Symbols not found</td>
                        <td><a href="" id="notFoundDownload">Download</a></td>
                        <td><button onclick="showNotFound()">Show</button></td>
                    </tr>
                    <tr>
                        <td>Settings</td>
                        <td><a href="" id="settingsDowload" onclick="dowloadSettings()">Download</a></td>
                        <td><button onclick="showSettings()">Show</button></td>
                    </tr>
                </table>


                <div class="plateContent">
                    <div id="fileContent">

                    </div>
                </div>
            </div>


        </footer>

    </main>
    <script>

    </script>
    <script type="text/javascript" src="library.js"></script>
    <script type="text/javascript" src="settings.js"></script>
    <script type="text/javascript" src="grnaService.js"></script>
    <script type="text/javascript" src="screeningHandler.js"></script>
    <script type="text/javascript" src="index.js"></script>
    <script type="text/javascript" src="fileHandler.js"></script>


</body>

</html>